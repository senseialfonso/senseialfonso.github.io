<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informaci칩n Financiera Personal</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>游붃</text></svg>">

    <style>
        /* Variables CSS para la paleta de colores */
        :root {
            --frostbite: #EC3AAA;
            --hot-pink: #FF64B8;
            --pale-magenta-pink: #FF98CE;
            --mimi-pink: #FFDBE9;
            --barbie-pink: #E11B8D;
        }

        /* Estilos Generales */
        body {
            font-family: Arial, sans-serif; /* Fuente original */
            margin: 20px;
            background-color: var(--mimi-pink); /* Fondo suave */
            color: #333; /* Texto oscuro para legibilidad */
        }

        header {
            background-color: var(--hot-pink); /* Un rosa vibrante para la cabecera */
            padding: 15px;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 8px;
            color: #fff; /* Texto blanco para contraste */
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        h1 {
            color: #fff; /* T칤tulo principal en blanco */
            margin: 0;
            display: flex; /* Usar flexbox para centrar el emoji */
            align-items: center;
            justify-content: center;
        }

        h1 .emoji {
            margin-left: 10px; /* Espacio entre el texto y el emoji */
            font-size: 1.2em; /* Tama침o del emoji */
        }

        main {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }

        section {
            background-color: #fff; /* El blanco funciona bien para el contenido principal */
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* Sombra m치s pronunciada para un look m치s moderno */
            flex: 1 1 calc(50% - 20px);
            min-width: 400px;
            border: 1px solid var(--pale-magenta-pink); /* Borde suave */
        }

        /* Ajuste para la secci칩n de "Otros Gastos" */
        .otros-gastos-section {
            flex: 1 1 calc(33% - 20px);
            min-width: 300px;
        }

        h2 {
            color: var(--barbie-pink); /* Un rosa fuerte para los t칤tulos de secci칩n */
            border-bottom: 2px solid var(--pale-magenta-pink); /* Borde inferior m치s claro */
            padding-bottom: 10px;
            margin-top: 0;
        }

        /* Estilos de Tabla */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th, td {
            border: 1px solid var(--mimi-pink); /* Bordes de tabla m치s claros */
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: var(--pale-magenta-pink); /* Fondo de cabecera de tabla */
            color: #333; /* Texto oscuro para contraste */
            font-weight: bold;
        }

        /* Filas impares con color de fondo */
        tbody tr:nth-child(odd) {
            background-color: #fefefe; /* Casi blanco para filas impares */
        }

        /* Estilo para inputs dentro de la tabla */
        td input[type="number"],
        td input[type="text"] {
            width: 90%;
            padding: 5px;
            border: 1px solid var(--hot-pink); /* Borde del input m치s visible */
            border-radius: 4px;
            box-sizing: border-box;
            outline-color: var(--frostbite); /* Color del contorno al enfocar */
        }

        /* Estilo para filas de totales */
        .total-row {
            background-color: var(--pale-magenta-pink); /* Rosa claro para totales */
            font-weight: bold;
        }

        .total-row strong {
            color: var(--barbie-pink); /* Texto de totales m치s oscuro */
        }

        /* Estilos espec칤ficos para la fila de Total Gastos */
        .total-gastos {
            background-color: var(--frostbite); /* Rosa fuerte para el total de gastos */
            color: #fff; /* Texto blanco para contraste */
        }

        /* Notas */
        .note {
            font-size: 0.9em;
            color: var(--barbie-pink); /* Color de nota */
            margin-top: 15px;
            text-align: center;
            font-style: italic;
            font-weight: bold;
        }

        /* Resumen de Ahorro */
        .resumen-section {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            flex-basis: 100%;
            margin-top: 20px;
            text-align: center;
        }

        .resumen-section .card {
            background-color: var(--mimi-pink); /* Rosa muy claro para las tarjetas */
            border: 1px solid var(--pale-magenta-pink);
            border-radius: 8px;
            padding: 15px;
            flex: 1;
            min-width: 250px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .resumen-section .card h3 {
            margin-top: 0;
            color: var(--barbie-pink); /* T칤tulos de tarjeta en rosa fuerte */
        }

        .resumen-section .card p {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--frostbite); /* Valores de ahorro en un rosa profundo */
        }

        /* Estilos para el Footer */
        footer {
            margin-top: 40px;
            padding: 20px;
            text-align: center;
            background-color: var(--hot-pink);
            color: #fff;
            border-radius: 8px;
            font-size: 0.9em;
        }
        
        footer a {
            color: #fff;
            text-decoration: none;
            font-weight: bold;
            margin: 0 8px; /* Espacio entre enlaces */
            display: inline-block; /* Asegurar que los m치rgenes funcionen */
        }

        footer a:hover {
            text-decoration: underline;
        }

        .social-icons {
            margin-top: 10px;
        }

        .social-icons span {
            margin-right: 5px; /* Espacio entre el icono y el texto del enlace */
            font-size: 1.2em; /* Tama침o del emoji de icono */
            vertical-align: middle; /* Alineaci칩n vertical */
        }

        /* Para dispositivos m치s peque침os */
        @media (max-width: 768px) {
            section {
                flex: 1 1 100%;
                min-width: unset;
            }
            .resumen-section {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>INFORMACI칍N FINANCIERA <span class="emoji">游붃</span></h1>
    </header>

    <main id="contentToPdf"> 
        <section class="ingresos-section">
            <h2>Ingresos</h2>
            <table>
                <thead>
                    <tr>
                        <th>Concepto</th>
                        <th>Mensuales</th>
                        <th>Anuales</th>
                    </tr>
                </thead>
                <tbody>
                    <tr data-concept="usted">
                        <td>Usted</td>
                        <td><input type="number" id="ingresoUstedMensual" value="0"></td>
                        <td><span id="ingresoUstedAnual"></span></td>
                    </tr>
                    <tr data-concept="conyuge">
                        <td>C칩nyuge</td>
                        <td><input type="number" id="ingresoConyugeMensual" value="0"></td>
                        <td><span id="ingresoConyugeAnual"></span></td>
                    </tr>
                    <tr data-concept="aguinaldo">
                        <td>Aguinaldo, Bono, Utilidades</td>
                        <td><input type="number" id="ingresoAguinaldoMensual" value="0"></td>
                        <td><span id="ingresoAguinaldoAnual"></span></td>
                    </tr>
                    <tr data-concept="pension">
                        <td>Pensi칩n, Rentas, Negocio, Intereses</td>
                        <td><input type="number" id="ingresoPensionMensual" value="0"></td>
                        <td><span id="ingresoPensionAnual"></span></td>
                    </tr>
                    <tr class="total-row">
                        <td><strong>Total Ingresos:</strong></td>
                        <td><span id="totalIngresosMensual"></span></td>
                        <td><span id="totalIngresosAnual"></span></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="gastos-mensuales-section">
            <h2>Gastos Mensuales</h2>
            <table>
                <thead>
                    <tr>
                        <th>Concepto</th>
                        <th>Mensuales</th>
                        <th>Anuales</th>
                        <th>%</th>
                    </tr>
                </thead>
                <tbody>
                    <tr data-concept="luzAguaGas">
                        <td>Luz / Agua / Gas</td>
                        <td><input type="number" id="gastoLuzMensual" value="0"></td>
                        <td><span id="gastoLuzAnual"></span></td>
                        <td><span id="gastoLuzPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="celularTelefono">
                        <td>Celular y Tel칠fono</td>
                        <td><input type="number" id="gastoCelularMensual" value="0"></td>
                        <td><span id="gastoCelularAnual"></span></td>
                        <td><span id="gastoCelularPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="tvInternet">
                        <td>Tv de Paga / Internet</td>
                        <td><input type="number" id="gastoTvMensual" value="0"></td>
                        <td><span id="gastoTvAnual"></span></td>
                        <td><span id="gastoTvPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="aseoHogarNinera">
                        <td>Aseo del Hogar / Ni침era</td>
                        <td><input type="number" id="gastoAseoMensual" value="0"></td>
                        <td><span id="gastoAseoAnual"></span></td>
                        <td><span id="gastoAseoPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="tintoreriaLavanderia">
                        <td>Tintoreria / Lavanderia</td>
                        <td><input type="number" id="gastoTintoreriaMensual" value="0"></td>
                        <td><span id="gastoTintoreriaAnual"></span></td>
                        <td><span id="gastoTintoreriaPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="despensaMercado">
                        <td>Despensa, Mercado - "Tiendita"</td>
                        <td><input type="number" id="gastoDespensaMensual" value="0"></td>
                        <td><span id="gastoDespensaAnual"></span></td>
                        <td><span id="gastoDespensaPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="comidaFueraCasa">
                        <td>Comidas fuera de casa (L-V)</td>
                        <td><input type="number" id="gastoComidaMensual" value="0"></td>
                        <td><span id="gastoComidaAnual"></span></td>
                        <td><span id="gastoComidaPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="diversion">
                        <td>Diversi칩n (Cine, Restaurante, Parque)</td>
                        <td><input type="number" id="gastoDiversionMensual" value="0"></td>
                        <td><span id="gastoDiversionAnual"></span></td>
                        <td><span id="gastoDiversionPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="transporteGasolina">
                        <td>Transportaci칩n / Gasolina</td>
                        <td><input type="number" id="gastoTransporteMensual" value="0"></td>
                        <td><span id="gastoTransporteAnual"></span></td>
                        <td><span id="gastoTransportePorcentaje"></span></td>
                    </tr>
                    <tr data-concept="rentaHipoteca">
                        <td>Renta / Hipoteca</td>
                        <td><input type="number" id="gastoRentaMensual" value="0"></td>
                        <td><span id="gastoRentaAnual"></span></td>
                        <td><span id="gastoRentaPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="escuelaColegiatura">
                        <td>Escuela / Colegiatura, GMM</td>
                        <td><input type="number" id="gastoEscuelaMensual" value="0"></td>
                        <td><span id="gastoEscuelaAnual"></span></td>
                        <td><span id="gastoEscuelaPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="segurosAutoVida">
                        <td>Seguros (Auto, Vida, GMM)</td>
                        <td><input type="number" id="gastoSegurosAutoVidaMensual" value="0"></td>
                        <td><span id="gastoSegurosAutoVidaAnual"></span></td>
                        <td><span id="gastoSegurosAutoVidaPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="tarjetasCredito">
                        <td>Tarjetas de Cr칠dito</td>
                        <td><input type="number" id="gastoTarjetasCreditoMensual" value="0"></td>
                        <td><span id="gastoTarjetasCreditoAnual"></span></td>
                        <td><span id="gastoTarjetasCreditoPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="deudasCreditosPersonales">
                        <td>Deudas / Cr칠ditos Personales</td>
                        <td><input type="number" id="gastoDeudasPersonalesMensual" value="0"></td>
                        <td><span id="gastoDeudasPersonalesAnual"></span></td>
                        <td><span id="gastoDeudasPersonalesPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="pagoVehiculos">
                        <td>Pago de Veh칤culos</td>
                        <td><input type="number" id="gastoPagoVehiculosMensual" value="0"></td>
                        <td><span id="gastoPagoVehiculosAnual"></span></td>
                        <td><span id="gastoPagoVehiculosPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="tiendasDepartamentales">
                        <td>Tiendas Departamentales</td>
                        <td><input type="number" id="gastoTiendasDepartamentalesMensual" value="0"></td>
                        <td><span id="gastoTiendasDepartamentalesAnual"></span></td>
                        <td><span id="gastoTiendasDepartamentalesPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="mascotas">
                        <td>Mascotas</td>
                        <td><input type="number" id="gastoMascotasMensual" value="0"></td>
                        <td><span id="gastoMascotasAnual"></span></td>
                        <td><span id="gastoMascotasPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="saludPediatra">
                        <td>Salud (Pediatra, Medicamentos Recu)</td>
                        <td><input type="number" id="gastoSaludMensual" value="0"></td>
                        <td><span id="gastoSaludAnual"></span></td>
                        <td><span id="gastoSaludPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="otrosGastosMensuales">
                        <td>Otros</td>
                        <td><input type="number" id="gastoOtrosMensual" value="0"></td>
                        <td><span id="gastoOtrosAnual"></span></td>
                        <td><span id="gastoOtrosPorcentaje"></span></td>
                    </tr>
                    <tr class="total-row">
                        <td><strong>Sub Total Gastos Mensuales</strong></td>
                        <td><span id="subTotalGastosMensual"></span></td>
                        <td><span id="subTotalGastosAnual"></span></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="gastos-anuales-section">
            <h2>Gastos Anuales</h2>
            <table>
                <thead>
                    <tr>
                        <th>Concepto</th>
                        <th>Mensuales</th>
                        <th>Anuales</th>
                        <th>%</th>
                    </tr>
                </thead>
                <tbody>
                    <tr data-concept="predial">
                        <td>Predial</td>
                        <td><span id="gastoPredialMensual"></span></td> 
                        <td><input type="number" id="gastoPredialAnualInput" value="0"></td> 
                        <td><span id="gastoPredialPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="tenenciaAuto">
                        <td>Tenencia Auto</td>
                        <td><span id="gastoTenenciaAutoMensual"></span></td> 
                        <td><input type="number" id="gastoTenenciaAutoAnualInput" value="0"></td> 
                        <td><span id="gastoTenenciaAutoPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="segurosAutoCasa">
                        <td>Seguros (Auto, Casa, GMM)</td>
                        <td><span id="gastoSegurosAutoCasaMensual"></span></td> 
                        <td><input type="number" id="gastoSegurosAutoCasaAnualInput" value="0"></td> 
                        <td><span id="gastoSegurosAutoCasaPorcentaje"></span></td>
                    </tr>
                    <tr data-concept="inscripciones">
                        <td>Inscripciones</td>
                        <td><span id="gastoInscripcionesMensual"></span></td> 
                        <td><input type="number" id="gastoInscripcionesAnualInput" value="0"></td> 
                        <td><span id="gastoInscripcionesPorcentaje"></span></td>
                    </tr>
                    <tr class="total-row">
                        <td><strong>Subtotal Gastos Anuales</strong></td>
                        <td><span id="subTotalGastosAnualesMensual"></span></td>
                        <td><span id="subTotalGastosAnualesAnual"></span></td>
                        <td></td>
                    </tr>
                    <tr class="total-row total-gastos">
                        <td><strong>Total Gastos</strong></td>
                        <td><span id="totalGastosMensual"></span></td>
                        <td><span id="totalGastosAnual"></span></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="otros-gastos-section">
            <h2>Otros Gastos (NP)</h2>
            <table>
                <thead>
                    <tr>
                        <th>NP</th>
                        <th>Concepto</th>
                        <th>Gasto por Mes</th>
                        <th>Gasto Anual</th>
                    </tr>
                </thead>
                <tbody id="otrosGastosBody">
                    <tr data-np="1">
                        <td>1</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="2">
                        <td>2</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="3">
                        <td>3</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="4">
                        <td>4</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="5">
                        <td>5</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="6">
                        <td>6</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="7">
                        <td>7</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="8">
                        <td>8</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="9">
                        <td>9</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="10">
                        <td>10</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="11">
                        <td>11</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="12">
                        <td>12</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="13">
                        <td>13</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="14">
                        <td>14</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr data-np="15">
                        <td>15</td>
                        <td><input type="text" value=""></td>
                        <td><input type="number" value="0"></td>
                        <td><span></span></td>
                    </tr>
                    <tr class="total-row">
                        <td></td>
                        <td><strong>Total</strong></td>
                        <td><span id="totalOtrosGastosMensual"></span></td>
                        <td><span id="totalOtrosGastosAnual"></span></td>
                    </tr>
                </tbody>
            </table>
            <p class="note">! NO FINJAS ! ANOTA TODOS TUS GASTOS</p>
        </section>

        <section class="resumen-section">
            <div class="card">
                <h3>Capacidad de ahorro mensual</h3>
                <p><span id="capacidadAhorroMensual"></span></p>
            </div>
            <div class="card">
                <h3>Capacidad de ahorro anual</h3>
                <p><span id="capacidadAhorroAnual"></span></p>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Informaci칩n Financiera Personal. Desarrollado con 游눘 para ti.</p>
        <div class="social-icons">
            <a href="https://www.tiktok.com/@lugares.con.cuii" target="_blank">
                <span role="img" aria-label="TikTok">游꿧</span> TikTok Lugares.con.cuii
            </a>
            <a href="https://www.tiktok.com/@karycuii" target="_blank">
                <span role="img" aria-label="TikTok">游꿧</span> TikTok KaryCuii
            </a>
            <a href="https://www.instagram.com/kary_la_de_los_seguros" target="_blank">
                <span role="img" aria-label="Instagram">游닞</span> Instagram Kary La de los Seguros
            </a>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const inputs = document.querySelectorAll('input[type="number"]');
            const textInputs = document.querySelectorAll('input[type="text"]');
            
            // Funci칩n para formatear n칰meros a moneda (MXN)
            const formatCurrency = (value) => {
                return new Intl.NumberFormat('es-MX', {
                    style: 'currency',
                    currency: 'MXN',
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                }).format(value);
            };

            // Funci칩n para formatear porcentajes
            const formatPercentage = (value) => {
                return (value * 100).toFixed(0) + '%';
            };

            // Funci칩n principal para calcular todos los valores
            const calculateAll = () => {
                let totalIngresosMensual = 0;
                let totalIngresosAnual = 0;

                // --- CALCULO DE INGRESOS ---
                const ingresoUstedMensual = parseFloat(document.getElementById('ingresoUstedMensual').value) || 0;
                document.getElementById('ingresoUstedAnual').textContent = formatCurrency(ingresoUstedMensual * 12);
                totalIngresosMensual += ingresoUstedMensual;

                const ingresoConyugeMensual = parseFloat(document.getElementById('ingresoConyugeMensual').value) || 0;
                document.getElementById('ingresoConyugeAnual').textContent = formatCurrency(ingresoConyugeMensual * 12);
                totalIngresosMensual += ingresoConyugeMensual;

                const ingresoAguinaldoMensual = parseFloat(document.getElementById('ingresoAguinaldoMensual').value) || 0;
                document.getElementById('ingresoAguinaldoAnual').textContent = formatCurrency(ingresoAguinaldoMensual * 12);
                totalIngresosMensual += ingresoAguinaldoMensual;

                const ingresoPensionMensual = parseFloat(document.getElementById('ingresoPensionMensual').value) || 0;
                document.getElementById('ingresoPensionAnual').textContent = formatCurrency(ingresoPensionMensual * 12);
                totalIngresosMensual += ingresoPensionMensual;

                totalIngresosAnual = totalIngresosMensual * 12;
                document.getElementById('totalIngresosMensual').textContent = formatCurrency(totalIngresosMensual);
                document.getElementById('totalIngresosAnual').textContent = formatCurrency(totalIngresosAnual);

                // --- CALCULO DE GASTOS MENSUALES ---
                let subTotalGastosMensual = 0;
                const gastosMensuales = [
                    { id: 'gastoLuz', value: parseFloat(document.getElementById('gastoLuzMensual').value) || 0 },
                    { id: 'gastoCelular', value: parseFloat(document.getElementById('gastoCelularMensual').value) || 0 },
                    { id: 'gastoTv', value: parseFloat(document.getElementById('gastoTvMensual').value) || 0 },
                    { id: 'gastoAseo', value: parseFloat(document.getElementById('gastoAseoMensual').value) || 0 },
                    { id: 'gastoTintoreria', value: parseFloat(document.getElementById('gastoTintoreriaMensual').value) || 0 },
                    { id: 'gastoDespensa', value: parseFloat(document.getElementById('gastoDespensaMensual').value) || 0 },
                    { id: 'gastoComida', value: parseFloat(document.getElementById('gastoComidaMensual').value) || 0 },
                    { id: 'gastoDiversion', value: parseFloat(document.getElementById('gastoDiversionMensual').value) || 0 },
                    { id: 'gastoTransporte', value: parseFloat(document.getElementById('gastoTransporteMensual').value) || 0 },
                    { id: 'gastoRenta', value: parseFloat(document.getElementById('gastoRentaMensual').value) || 0 },
                    { id: 'gastoEscuela', value: parseFloat(document.getElementById('gastoEscuelaMensual').value) || 0 },
                    { id: 'gastoSegurosAutoVida', value: parseFloat(document.getElementById('gastoSegurosAutoVidaMensual').value) || 0 },
                    { id: 'gastoTarjetasCredito', value: parseFloat(document.getElementById('gastoTarjetasCreditoMensual').value) || 0 },
                    { id: 'gastoDeudasPersonales', value: parseFloat(document.getElementById('gastoDeudasPersonalesMensual').value) || 0 },
                    { id: 'gastoPagoVehiculos', value: parseFloat(document.getElementById('gastoPagoVehiculosMensual').value) || 0 },
                    { id: 'gastoTiendasDepartamentales', value: parseFloat(document.getElementById('gastoTiendasDepartamentalesMensual').value) || 0 },
                    { id: 'gastoMascotas', value: parseFloat(document.getElementById('gastoMascotasMensual').value) || 0 },
                    { id: 'gastoSalud', value: parseFloat(document.getElementById('gastoSaludMensual').value) || 0 },
                    { id: 'gastoOtros', value: parseFloat(document.getElementById('gastoOtrosMensual').value) || 0 },
                ];

                gastosMensuales.forEach(gasto => {
                    const anual = gasto.value * 12;
                    document.getElementById(`${gasto.id}Anual`).textContent = formatCurrency(anual);
                    subTotalGastosMensual += gasto.value;
                });

                const subTotalGastosAnual = subTotalGastosMensual * 12;
                document.getElementById('subTotalGastosMensual').textContent = formatCurrency(subTotalGastosMensual);
                document.getElementById('subTotalGastosAnual').textContent = formatCurrency(subTotalGastosAnual);

                // Calcular porcentajes de gastos mensuales
                if (subTotalGastosMensual > 0) {
                    gastosMensuales.forEach(gasto => {
                        const porcentaje = gasto.value / subTotalGastosMensual;
                        document.getElementById(`${gasto.id}Porcentaje`).textContent = formatPercentage(porcentaje);
                    });
                } else {
                    gastosMensuales.forEach(gasto => {
                        document.getElementById(`${gasto.id}Porcentaje`).textContent = '0%';
                    });
                }

                // --- CALCULO DE GASTOS ANUALES ---
                let subTotalGastosAnualesMensual = 0;
                let subTotalGastosAnualesAnual = 0;
                const gastosAnuales = [
                    { id: 'gastoPredial', inputId: 'gastoPredialAnualInput' },
                    { id: 'gastoTenenciaAuto', inputId: 'gastoTenenciaAutoAnualInput' },
                    { id: 'gastoSegurosAutoCasa', inputId: 'gastoSegurosAutoCasaAnualInput' },
                    { id: 'gastoInscripciones', inputId: 'gastoInscripcionesAnualInput' },
                ];

                gastosAnuales.forEach(gasto => {
                    const anualValue = parseFloat(document.getElementById(gasto.inputId).value) || 0;
                    const mensualValue = anualValue / 12;
                    
                    document.getElementById(`${gasto.id}Mensual`).textContent = formatCurrency(mensualValue);
                    document.getElementById(`${gasto.id}AnualInput`).value = anualValue; 
                    
                    subTotalGastosAnualesMensual += mensualValue;
                    subTotalGastosAnualesAnual += anualValue;
                });

                document.getElementById('subTotalGastosAnualesMensual').textContent = formatCurrency(subTotalGastosAnualesMensual);
                document.getElementById('subTotalGastosAnualesAnual').textContent = formatCurrency(subTotalGastosAnualesAnual);

                // Calcular porcentajes de gastos anuales (respecto al subtotal anual de gastos anuales)
                if (subTotalGastosAnualesAnual > 0) { 
                    gastosAnuales.forEach(gasto => {
                        const anualValue = parseFloat(document.getElementById(gasto.inputId).value) || 0;
                        const porcentaje = anualValue / subTotalGastosAnualesAnual;
                        document.getElementById(`${gasto.id}Porcentaje`).textContent = formatPercentage(porcentaje);
                    });
                } else {
                    gastosAnuales.forEach(gasto => {
                        document.getElementById(`${gasto.id}Porcentaje`).textContent = '0%';
                    });
                }

                // --- CALCULO DE OTROS GASTOS (NP) ---
                let totalOtrosGastosMensual = 0;
                const otrosGastosRows = document.querySelectorAll('#otrosGastosBody tr');
                otrosGastosRows.forEach(row => {
                    const mensualInput = row.querySelector('input[type="number"]');
                    const anualSpan = row.querySelector('span');
                    const mensualValue = parseFloat(mensualInput.value) || 0;
                    const anualValue = mensualValue * 12;
                    anualSpan.textContent = formatCurrency(anualValue);
                    totalOtrosGastosMensual += mensualValue;
                });
                const totalOtrosGastosAnual = totalOtrosGastosMensual * 12;
                document.getElementById('totalOtrosGastosMensual').textContent = formatCurrency(totalOtrosGastosMensual);
                document.getElementById('totalOtrosGastosAnual').textContent = formatCurrency(totalOtrosGastosAnual);

                // --- CALCULO DE TOTAL DE GASTOS ---
                const totalGastosMensual = subTotalGastosMensual + subTotalGastosAnualesMensual + totalOtrosGastosMensual;
                const totalGastosAnual = totalGastosMensual * 12; 
                document.getElementById('totalGastosMensual').textContent = formatCurrency(totalGastosMensual);
                document.getElementById('totalGastosAnual').textContent = formatCurrency(totalGastosAnual);

                // --- CALCULO DE CAPACIDAD DE AHORRO ---
                const capacidadAhorroMensual = totalIngresosMensual - totalGastosMensual;
                const capacidadAhorroAnual = capacidadAhorroMensual * 12;
                document.getElementById('capacidadAhorroMensual').textContent = formatCurrency(capacidadAhorroMensual);
                document.getElementById('capacidadAhorroAnual').textContent = formatCurrency(capacidadAhorroAnual);
            };

            // A침adir listeners a todos los inputs num칠ricos para recalcular al cambiar
            inputs.forEach(input => {
                input.addEventListener('input', calculateAll);
            });

            // A침adir listeners a los inputs de texto en "Otros Gastos" para que el c치lculo tambi칠n se active
            textInputs.forEach(input => {
                input.addEventListener('input', calculateAll);
            });

            // Asegurarse de a침adir listeners a los inputs de gastos anuales
            document.querySelectorAll('.gastos-anuales-section input[type="number"]').forEach(input => {
                input.addEventListener('input', calculateAll);
            });

            // Llamar a la funci칩n de c치lculo al cargar la p치gina para inicializar los valores
            calculateAll();
        });
    </script>
</body>
</html>
